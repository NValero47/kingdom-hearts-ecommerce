<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>商品詳細</title>
<link rel="stylesheet" href="css/public.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
</head>

<body>

    <!-- HEADER -->
    <header>
        <div class="logo">
            <img src="img/kh_logo.png" alt="キングダム ハーツ ロゴ">
            <h1>キングダム ハーツ ショップ</h1>
        </div>
    </header>

    <!-- MAIN NAV -->
    <nav>
        <a id="enlace_productos" href="#">商品</a>
        <a id="enlace_login" href="#">ログイン</a>
        <a id="enlace_registro" href="#">登録</a>
        <a id="enlace_carrito" href="#">カート</a>
        <a id="enlace_pedidos" href="#">注文履歴</a>
        <a class="admin-link" href="admin/obtenerProductos">管理者</a>
    </nav>
    
    <nav class="nav-idiomas">
        <a th:href="@{/(idioma='es')}">スペイン語</a>
        <a th:href="@{/(idioma='en')}">英語</a>
        <a th:href="@{/(idioma='jap')}">日本語</a>
    </nav>

    <!-- USER -->
    <div id="login_usuario">未ログインユーザー</div>

    <!-- MAIN CONTENT -->
    <div id="contenedor">

        <h2 class="pedido-titulo" th:text="${producto.nombre}"></h2>

        <div class="producto-detalle-layout">

            <!-- Gallery -->
            <div class="galeria">

                <!-- Main image -->
                <img class="imagen-principal"
                     th:src="@{'/mostrar_imagen?id=' + ${producto.id}}"
                     alt="メイン画像"/>

                <!-- Thumbnails -->
                <div class="imagenes-secundarias">
                    <img th:each="img : ${imagenes}"
                         th:src="@{'/mostrar_imagen_extra?id=' + ${img.id}}"
                         class="miniatura"
                         alt="追加画像"/>
                </div>

            </div>

            <!-- 情報 -->
			<div class="producto-detalle-info">
			    <p><strong>名前:</strong> <span th:text="${producto.nombre}"></span></p>
			    <p><strong>価格:</strong> <span th:text="${producto.precio}"></span> €</p>
			    <p><strong>説明:</strong></p>
			    <p th:text="${producto.descripcion}"></p>
			    <p><strong>状態:</strong> <span th:text="${producto.estado}"></span></p>
			    <p><strong>タイプ:</strong> <span th:text="${producto.tipo}"></span></p>
			    <p><strong>在庫:</strong> <span th:text="${producto.stock}"></span></p>
			    <p><strong>カテゴリー:</strong> <span th:text="${producto.categoria.nombre}"></span></p>
			
			    <br>
			    <a href="#" class="enlace_comprar_producto btn-confirmar" th:attr="id-producto=${producto.id}">カートに追加</a>
			</div>

        </div>

    </div>

    <!-- FOOTER -->
    <footer>
        © 2025 キングダム ハーツ ショップ — 全著作権所有
    </footer>

    <!-- SCRIPTS -->
    <script src="librerias_js/jquery.js"></script>
    <script src="librerias_js/mustache.js"></script>
    <script src="javascript/globales.js"></script>
    <script>
		idioma = "_jap"
	</script>
    <script src="javascript/cargar_plantillas.js"></script>
    <script src="javascript/funciones_menu.js"></script>
    <script th:inline="javascript">
	    let usuarioId = /*[[${usuarioId}]]*/ null;
	</script>
	<script>
	    if (usuarioId !== null) {
	        $.get("usuariosREST/getNombre?id=" + usuarioId, function(nombre) {
	            nombre_login = nombre;
	            $("#login_usuario").html("Hola " + nombre);
	    	    let textoCerrar = "Cerrar sesión";
	    		if (idioma === "_en") {
	    		    textoCerrar = "Log out";
	    		} else if (idioma === "_jap") {
	    		    textoCerrar = "ログアウト";
	    		}
	            $("#enlace_login").html(textoCerrar);
	        });
	    }
	</script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>
</html>
