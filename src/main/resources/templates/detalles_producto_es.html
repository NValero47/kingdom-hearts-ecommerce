<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Detalles del producto</title>
<link rel="stylesheet" href="css/public.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
</head>

<body>

    <!-- HEADER -->
    <header>
        <div class="logo">
            <img src="img/kh_logo.png" alt="Logo Kingdom Hearts">
            <h1>Kingdom Hearts Shop</h1>
        </div>
    </header>

    <!-- NAV PRINCIPAL -->
    <nav>
		<a id="enlace_productos" href="#">Productos</a>
		<a id="enlace_login" href="#">Iniciar sesión</a>
		<a id="enlace_registro" href="#">Registrarme</a>
		<a id="enlace_carrito" href="#">Carrito</a>
		<a id="enlace_pedidos" href="#">Mis pedidos</a>
		<a class="admin-link" href="admin/obtenerProductos">Administración</a>
	</nav>
	
	<nav class="nav-idiomas">
	    <a th:href="@{/(idioma='es')}">Español</a>
	    <a th:href="@{/(idioma='en')}">Inglés</a>
	    <a th:href="@{/(idioma='jap')}">Japonés</a>
	</nav>

    <!-- USUARIO -->
    <div id="login_usuario">Usuario no identificado</div>

    <!-- CONTENIDO PRINCIPAL -->
    <div id="contenedor">

        <h2 class="pedido-titulo" th:text="${producto.nombre}"></h2>

        <div class="producto-detalle-layout">

            <!-- Galería -->
            <div class="galeria">

                <!-- Imagen principal -->
				<img class="imagen-principal" th:src="@{'/mostrar_imagen?id=' + ${producto.id}}" alt="Imagen principal"/>

                <!-- Miniaturas -->
                <div class="imagenes-secundarias">
				    <img th:src="@{'/mostrar_imagen?id=' + ${producto.id}}" class="miniatura" alt="Imagen principal"/>
				    <img th:each="img : ${imagenes}" th:src="@{'/mostrar_imagen_extra?id=' + ${img.id}}" class="miniatura" alt="Imagen adicional"/>
				</div>
				
            </div>

            <!-- Información -->
			<div class="producto-detalle-info">
			    <p><strong>Nombre:</strong> <span th:text="${producto.nombre}"></span></p>
			    <p><strong>Precio:</strong> <span th:text="${producto.precio}"></span> €</p>
			    <p><strong>Descripción:</strong></p>
			    <p th:text="${producto.descripcion}"></p>
			    <p><strong>Estado:</strong> <span th:text="${producto.estado}"></span></p>
			    <p><strong>Tipo:</strong> <span th:text="${producto.tipo}"></span></p>
			    <p><strong>Stock:</strong> <span th:text="${producto.stock}"></span></p>
			    <p><strong>Categoría:</strong> <span th:text="${producto.categoria.nombre}"></span></p>
			
			    <br>
			    <a href="#" class="enlace_comprar_producto btn-confirmar" th:attr="id-producto=${producto.id}">Añadir al carrito</a>
			</div>

        </div>

    </div>

    <!-- FOOTER -->
    <footer>
        © 2025 Kingdom Hearts Shop — Todos los derechos reservados
    </footer>

    <!-- SCRIPTS -->    
    <script src="librerias_js/jquery.js"></script>
    <script src="librerias_js/mustache.js"></script>
    <script src="javascript/globales.js"></script>
    <script src="javascript/cargar_plantillas.js"></script>
	<script src="javascript/funciones_menu.js"></script>
	<script th:inline="javascript">
	    let usuarioId = /*[[${usuarioId}]]*/ null;
	</script>
	<script>
	    if (usuarioId !== null) {
	        $.get("usuariosREST/getNombre?id=" + usuarioId, function(nombre) {
	            nombre_login = nombre;
	            $("#login_usuario").html("Hola " + nombre);
	    	    let textoCerrar = "Cerrar sesión";
	    		if (idioma === "_en") {
	    		    textoCerrar = "Log out";
	    		} else if (idioma === "_jap") {
	    		    textoCerrar = "ログアウト";
	    		}
	            $("#enlace_login").html(textoCerrar);
	        });
	    }
	</script>
	<script src="javascript/carrusel.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>
</html>