<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Product Details</title>
<link rel="stylesheet" href="css/public.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
</head>

<body>

    <!-- HEADER -->
    <header>
        <div class="logo">
            <img src="img/kh_logo.png" alt="Kingdom Hearts Logo">
            <h1>Kingdom Hearts Shop</h1>
        </div>
    </header>

    <!-- MAIN NAV -->
    <nav>
        <a id="enlace_productos" href="#">Products</a>
        <a id="enlace_login" href="#">Login</a>
        <a id="enlace_registro" href="#">Register</a>
        <a id="enlace_carrito" href="#">Cart</a>
        <a id="enlace_pedidos" href="#">My Orders</a>
        <a class="admin-link" href="admin/obtenerProductos">Admin</a>
    </nav>
    
    <nav class="nav-idiomas">
        <a th:href="@{/(idioma='es')}">Spanish</a>
        <a th:href="@{/(idioma='en')}">English</a>
        <a th:href="@{/(idioma='jap')}">Japanese</a>
    </nav>

    <!-- USER -->
    <div id="login_usuario">User not identified</div>

    <!-- MAIN CONTENT -->
    <div id="contenedor">

        <h2 class="pedido-titulo" th:text="${producto.nombre}"></h2>

        <div class="producto-detalle-layout">

            <!-- Gallery -->
            <div class="galeria">

                <!-- Main image -->
                <img class="imagen-principal"
                     th:src="@{'/mostrar_imagen?id=' + ${producto.id}}"
                     alt="Main image"/>

                <!-- Thumbnails -->
                <div class="imagenes-secundarias">
                    <img th:each="img : ${imagenes}"
                         th:src="@{'/mostrar_imagen_extra?id=' + ${img.id}}"
                         class="miniatura"
                         alt="Additional image"/>
                </div>

            </div>

            <!-- Information -->
			<div class="producto-detalle-info">
			    <p><strong>Name:</strong> <span th:text="${producto.nombre}"></span></p>
			    <p><strong>Price:</strong> <span th:text="${producto.precio}"></span> €</p>
			    <p><strong>Description:</strong></p>
			    <p th:text="${producto.descripcion}"></p>
			    <p><strong>Status:</strong> <span th:text="${producto.estado}"></span></p>
			    <p><strong>Type:</strong> <span th:text="${producto.tipo}"></span></p>
			    <p><strong>Stock:</strong> <span th:text="${producto.stock}"></span></p>
			    <p><strong>Category:</strong> <span th:text="${producto.categoria.nombre}"></span></p>
			
			    <br>
			    <a href="#" class="enlace_comprar_producto btn-confirmar" th:attr="id-producto=${producto.id}">Add to cart</a>
			</div>

        </div>

    </div>

    <!-- FOOTER -->
    <footer>
        © 2025 Kingdom Hearts Shop — All rights reserved
    </footer>

    <!-- SCRIPTS -->
    <script src="librerias_js/jquery.js"></script>
    <script src="librerias_js/mustache.js"></script>
    <script src="javascript/globales.js"></script>
    <script>
		idioma = "_en"
		obtenerProductos()
	</script>
    <script src="javascript/cargar_plantillas.js"></script>
    <script src="javascript/funciones_menu.js"></script>
    <script th:inline="javascript">
	    let usuarioId = /*[[${usuarioId}]]*/ null;
	</script>
	<script>
	    if (usuarioId !== null) {
	        $.get("usuariosREST/getNombre?id=" + usuarioId, function(nombre) {
	            nombre_login = nombre;
	            $("#login_usuario").html("Hola " + nombre);
	    	    let textoCerrar = "Cerrar sesión";
	    		if (idioma === "_en") {
	    		    textoCerrar = "Log out";
	    		} else if (idioma === "_jap") {
	    		    textoCerrar = "ログアウト";
	    		}
	            $("#enlace_login").html(textoCerrar);
	        });
	    }
	</script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>
</html>
